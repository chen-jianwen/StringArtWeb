import{_ as g,r as o,c as r,o as u,a,w as _,b as c,d as h,v as p,t as m,u as y}from"./index-Cm6jqIEV.js";const b={class:"admin-login-bg"},w={class:"admin-login-card"},x=["disabled"],S={key:0,class:"admin-login-error"},N={__name:"AdminLogin",setup(V){const n=o(""),l=o(""),t=o(""),s=o(!1),v=y();async function f(){t.value="",s.value=!0;try{const e=await(await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:n.value,password:l.value})})).json();e.code===0&&e.data.is_admin?(localStorage.setItem("user",JSON.stringify(e.data)),v.push("/admin")):t.value=e.msg||"登录失败或无管理员权限"}catch{t.value="网络错误，请重试"}s.value=!1}return(d,e)=>(u(),r("div",b,[a("div",w,[e[2]||(e[2]=a("h2",null,"后台管理员登录",-1)),a("form",{onSubmit:_(f,["prevent"])},[c(a("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>n.value=i),type:"text",placeholder:"手机号",maxlength:"20",required:""},null,512),[[p,n.value]]),c(a("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>l.value=i),type:"password",placeholder:"密码",required:""},null,512),[[p,l.value]]),a("button",{class:"admin-login-btn",disabled:s.value},m(s.value?"登录中...":"登录"),9,x),t.value?(u(),r("div",S,m(t.value),1)):h("",!0)],32)])]))}},B=g(N,[["__scopeId","data-v-95fed6f3"]]);export{B as default};
